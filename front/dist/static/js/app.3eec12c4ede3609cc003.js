webpackJsonp([1],{"/AmK":function(t,e){},"/Dkp":function(t,e){},"2mV7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("gNcp"),a={};s.keys().forEach(function(t){"./index.js"!==t&&(a[t.replace(/(\.\/|\.js)/g,"")]=s(t).default)}),e.default=a},"4+hh":function(t,e){},"4NAf":function(t,e){},"5bUX":function(t,e){},"9ldM":function(t,e,n){t.exports=n.p+"static/img/user-icon.7ea4af7.png"},BaGR:function(t,e){},"D+VX":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={namespaced:!0,state:{token:null,user:null,isUserLoggedIn:!1,points:null},mutations:{setToken:function(t,e){t.token=e,t.isUserLoggedIn=!!e},setUser:function(t,e){t.user=e},setPoints:function(t,e){t.points=e},logoff:function(t){t.token=null,t.user=null,t.isUserLoggedIn=!1}},actions:{setToken:function(t,e){(0,t.commit)("setToken",e)},setUser:function(t,e){(0,t.commit)("setUser",e)},setPoints:function(t,e){(0,t.commit)("setPoints",e)},logoff:function(t){(0,t.commit)("logoff")}},getters:{getToken:function(t){return t.token},getUser:function(t){return t.user},getLogged:function(t){return t.isUserLoggedIn},getPoints:function(t){return t.points}}}},GFWS:function(t,e){},HRwW:function(t,e){},JpfY:function(t,e){},L6Rd:function(t,e){},LHSp:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("tvR6");var s=n("qBF2"),a=n.n(s),r=n("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"app"},o,!1,function(t){n("TFOp")},null,null).exports,u=n("9JMe"),c=n("/ocq"),l=n("NYxO"),d=n("424j"),p=n("2mV7");r.default.use(l.a);var v=new l.a.Store({modules:p.default,plugins:[Object(d.a)({keyCripto:"key-prod",paths:["auth"]})],strict:!1}),h=n("Gu7T"),m=n.n(h),f=n("Xxa5"),_=n.n(f),g=n("exGp"),b=n.n(g),x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box-general"},[e("section",{staticClass:"box-default"},[e("div",{staticClass:"logo"},[this._v(" TEST (BACK) ALLGOO ")]),this._v(" "),e("h1",[this._v(this._s(this.title))]),this._v(" "),this._t("default")],2)])},staticRenderFns:[]};var k=n("VU/8")({props:["title"]},x,!1,function(t){n("LHSp")},null,null).exports,w=n("mtWM"),y=n.n(w),q=function(){return v.state.auth.token,y.a.create({baseURL:"http://localhost:8086/api/auth/",headers:{contentType:"application/json"}})},$=function(t,e){return q().get("/auth/"+t+"/"+e)},C=function(t,e){return q().post("/auth/"+t,e)},F=function(){return v.state.auth.token?y.a.create({baseURL:"http://localhost:8086/api/questions/",headers:{authorization:v.state.auth.token}}):y.a.create({baseURL:"http://localhost:8086/api/questions/"})},U=function(){return F().get("/punctuation")},T=function(t){return F().post("/punctuation/register",t)},E={components:{"a-login-facebook":R},beforeCreate:function(){var t,e,n,s,a;window.fbAsyncInit=function(){FB.init({appId:"497482067332063",xfbml:!0,version:"v3.1"}),FB.AppEvents.logPageView()},t=document,e="script",n="facebook-jssdk",a=t.getElementsByTagName(e)[0],t.getElementById(n)||((s=t.createElement(e)).id=n,s.src="https://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(s,a))},methods:{login:function(){var t=this;FB.login(function(e){t.$emit("submit",e.authResponse.accessToken)})}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-list-item",{staticClass:"btn facebook",on:{click:function(e){t.login()}}},[n("md-icon",[t._v("thumb_up")]),t._v(" "),n("span",{staticClass:"md-list-item-text"},[t._v("Facebook")])],1)},staticRenderFns:[]};var R=n("VU/8")(E,S,!1,function(t){n("tqqN")},"data-v-10d1f6c8",null).exports,L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){t.visible=!0}}},[n("i",{staticClass:"el-icon-d-arrow-right"}),t._v(" LOGIN - ADMINISTRADOR\n    ")]),t._v(" "),n("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("el-dialog",{attrs:{title:t.title,visible:t.visible,"close-on-press-escape":!1,"close-on-click-modal":!1,"custom-class":"box-login"},on:{"update:visible":function(e){t.visible=e}}},[n("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.email,expression:"email"}],class:{input:!0,"is-danger":t.errors.has("email"),"is-success":!t.errors.has("email")&&""!=t.email},attrs:{name:"email",type:"email",placeholder:"E-MAIL"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("email"),expression:"errors.has('email')"}]},[t._v(" "+t._s(t.errors.first("email"))+" ")]),t._v(" "),n("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.senha,expression:"senha"}],class:{input:!0,"is-danger":t.errors.has("senha"),"is-success":!t.errors.has("senha")&&""!=t.senha},attrs:{name:"senha",type:"password",placeholder:"SENHA"},domProps:{value:t.senha},on:{input:function(e){e.target.composing||(t.senha=e.target.value)}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("senha"),expression:"errors.has('senha')"}]},[t._v(" "+t._s(t.errors.first("senha"))+" ")]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.visible=!1}}},[t._v("SAIR")]),t._v(" "),n("el-button",{attrs:{"native-type":"submit",type:"success"}},[t._v("ENTRAR")])],1)])],1)],1)},staticRenderFns:[]};var O={components:{"a-general":k,"a-login-facebook":R,"a-login-email":n("VU/8")({props:["title"],data:function(){return{visible:!1,email:"",senha:""}},methods:{login:function(){var t=this;t.$validator.validateAll().then(function(e){e&&t.$emit("submit",{email:t.email,password:t.senha})})}}},L,!1,function(t){n("L6Rd")},"data-v-4d614395",null).exports},data:function(){return{loading:""}},methods:{authenticateFacebook:function(t){var e=this;return b()(_.a.mark(function n(){var s,a,r,o,i;return _.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e._openFullScreen(),n.next=4,$("facebook",t);case 4:return s=n.sent,a=s.data.token,r=s.data.me,e.$store.dispatch("auth/setToken",a),e.$store.dispatch("auth/setUser",r),n.next=11,T({user_id:r.id});case 11:o=n.sent,e.$store.dispatch("auth/setPoints",o.data.points),e.loading.close(),e.$message({dangerouslyUseHTMLString:!0,message:"Logado com <strong>SUCESSO</strong>, seja Bem-Vindo!",type:"success"}),i=e.$route.query.redirect?e.$route.query.redirect:"/dashboard/home",e.$router.push({path:i}),n.next=25;break;case 19:n.prev=19,n.t0=n.catch(0),e.$store.dispatch("auth/setToken",null),e.$store.dispatch("auth/setUser",null),e.loading.close(),e.$message({dangerouslyUseHTMLString:!0,message:"Erro ao efetuar o login via facebook!",type:"error"});case 25:case"end":return n.stop()}},n,e,[[0,19]])}))()},authenticateAdmin:function(t){var e=this;return b()(_.a.mark(function n(){var s,a,r,o,i;return _.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e._openFullScreen(),n.next=4,C("admin",t);case 4:s=n.sent,a=s.data.token,r=s.data.me,e.$store.dispatch("auth/setToken",a),e.$store.dispatch("auth/setUser",r),e.loading.close(),e.$message({dangerouslyUseHTMLString:!0,message:"Logado com <strong>SUCESSO</strong>, seja Bem-Vindo!",type:"success"}),o=e.$route.query.redirect?e.$route.query.redirect:"/dashboard/transaction",e.$router.push({path:o}),n.next=21;break;case 15:n.prev=15,n.t0=n.catch(0),e.loading.close(),i="",i=void 0!=n.t0.response&&403==n.t0.response.status?"Erro: você precisa ser administrador!":"Erro: e-mail ou senha incorretos!",e.$message({dangerouslyUseHTMLString:!0,message:i,type:"error"});case 21:case"end":return n.stop()}},n,e,[[0,15]])}))()},_openFullScreen:function(){this.loading=this.$loading({lock:!0,text:"Carregando",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("a-general",{attrs:{title:"Faça seu Login"}},[e("section",{staticClass:"box-btn-social"},[e("a-login-facebook",{on:{submit:this.authenticateFacebook}})],1),this._v(" "),e("section",{staticClass:"box-btn-admin"},[e("a-login-email",{attrs:{title:"Login - Administrador"},on:{submit:this.authenticateAdmin}})],1)])},staticRenderFns:[]};var D=n("VU/8")(O,P,!1,function(t){n("4NAf")},null,null).exports,I=(n("4+hh"),n("fZjL")),V=n.n(I),M=n("Dd8w"),N=n.n(M),A=[{path:"/dashboard/home",title:"Mural",icon:"home",extended:!1,auth:[1]},{path:"/dashboard/transaction",title:"Transações",icon:"list",extended:!1,auth:[2]},{path:"/dashboard/ranking",title:"Ranking",icon:"format_list_numbered",extended:!0,children:[{path:"/dashboard/ranking/honesty",title:"Honestidade"},{path:"/dashboard/ranking/punctuation",title:"Pontuação"}],auth:[1]}],j={computed:N()({},Object(l.b)("auth",["user","points"]),{pathFull:function(){return this.$route.path}}),data:function(){return{links:[],nav:!1,extended:[]}},mounted:function(){this.links=A},methods:{updatePath:function(t){var e=this;V()(this.extended).map(function(n){n!=t&&(e.extended[n]=!1)})}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"navbar-mobile"},[n("div",{staticClass:"header"},[n("div",[n("p",[t._v(t._s(t.user.name))]),t._v(" "),null!=t.points?n("span",{staticClass:"points-text"},[t._v("PONTOS: "+t._s(parseFloat(t.points).toFixed(2).toString()))]):t._e()]),t._v(" "),n("button",{class:t.nav?"btn-nav active":"btn-nav",on:{click:function(e){t.nav=!t.nav}}},[n("md-icon",[t._v("menu")])],1)]),t._v(" "),n("nav",{directives:[{name:"show",rawName:"v-show",value:t.nav,expression:"nav"}],staticClass:"links-mobile"},t._l(t.links,function(e){return n("md-list",{key:e.path},[e.auth.some(function(e){return e==t.user.func})?n("div",[e.extended?n("md-list-item",{class:"/"+t.pathFull.split("/")[2]==e.path?"active":"",attrs:{"md-expand":"","md-expanded":t.extended[e.title]},on:{"update:mdExpanded":function(n){t.$set(t.extended,e.title,n)}}},[n("md-icon",[t._v(t._s(e.icon))]),t._v(" "),n("span",{staticClass:"md-list-item-text"},[t._v(t._s(e.title))]),t._v(" "),n("md-list",{attrs:{slot:"md-expand"},slot:"md-expand"},t._l(e.children,function(s){return n("div",{key:s.path,staticStyle:{position:"relative"}},[n("md-list-item",{class:t.pathFull==s.path?"active":"",attrs:{to:s.path},on:{click:function(n){t.updatePath(e.title)}}},[t._v("\n                                - "+t._s(s.title)+" "),n("span",{directives:[{name:"show",rawName:"v-show",value:s.alert,expression:"sublink.alert"}],staticClass:"alert-sub"},[t._v("3")])]),t._v(" "),n("div",{class:t.pathFull==s.path?"efect-sub-active":""})],1)}))],1):n("md-list-item",{class:t.pathFull==e.path?"active":"",attrs:{to:e.path},on:{click:function(n){t.updatePath(e.title)}}},[n("md-icon",[t._v(t._s(e.icon))]),t._v(" "),n("span",{staticClass:"md-list-item-text"},[t._v(t._s(e.title))])],1)],1):t._e()])}))])},staticRenderFns:[]};var B=n("VU/8")(j,H,!1,function(t){n("YWvW")},"data-v-53f81c5d",null).exports,z=n("9ldM"),G=n.n(z),W={computed:N()({},Object(l.b)("auth",["user","points"]),{pathFull:function(){return this.$route.path}}),data:function(){return{links:[],logo:"",extended:[]}},mounted:function(){this.links=A,this.getLogo(this.user)},methods:{getLogo:function(t){void 0!=t.photo&&""!=t.photo?this.logo=t.photo:this.logo=G.a},updatePath:function(t){var e=this;V()(this.extended).map(function(n){n!=t&&(e.extended[n]=!1)})}}},K={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"navbar",attrs:{id:"navbar"}},[n("header",{staticClass:"header"},[n("img",{staticClass:"logo",attrs:{src:t.logo,title:"logo"}}),t._v(" "),n("h1",[t._v(t._s(t.user.name))]),t._v(" "),null!=t.points?n("h2",[n("b",[t._v("PONTOS:")]),t._v(" "+t._s(parseFloat(t.points).toFixed(2).toString()))]):t._e()]),t._v(" "),n("nav",{staticClass:"nav"},t._l(t.links,function(e){return n("md-list",{key:e.path},[e.auth.some(function(e){return e==t.user.func})?n("div",[e.extended?n("md-list-item",{class:"/"+t.pathFull.split("/")[2]==e.path?"active":"",attrs:{"md-expand":"","md-expanded":t.extended[e.title]},on:{"update:mdExpanded":function(n){t.$set(t.extended,e.title,n)}}},[n("md-icon",[t._v(t._s(e.icon))]),t._v(" "),n("span",{staticClass:"md-list-item-text"},[t._v(t._s(e.title))]),t._v(" "),n("md-list",{attrs:{slot:"md-expand"},slot:"md-expand"},t._l(e.children,function(s){return n("div",{key:s.path,staticStyle:{position:"relative"},on:{click:function(n){t.updatePath(e.title)}}},[n("md-list-item",{class:t.pathFull==s.path?"active":"",attrs:{to:s.path}},[t._v("\n                                - "+t._s(s.title)+" "),n("span",{directives:[{name:"show",rawName:"v-show",value:s.alert,expression:"sublink.alert"}],staticClass:"alert-sub"},[t._v("3")])]),t._v(" "),n("div",{class:t.pathFull==s.path?"efect-sub-active":""})],1)}))],1):n("md-list-item",{class:t.pathFull==e.path?"active":"",attrs:{to:e.path},on:{click:function(n){t.updatePath(e.title)}}},[n("md-icon",[t._v(t._s(e.icon))]),t._v(" "),n("span",{staticClass:"md-list-item-text"},[t._v(t._s(e.title))]),t._v(" "),n("div",{class:t.pathFull==e.path?"efect-active":""})],1)],1):t._e()])}))])},staticRenderFns:[]};var Q=n("VU/8")(W,K,!1,function(t){n("GFWS")},null,null).exports,Y={computed:N()({},Object(l.b)("auth",["user"]),{pathFull:function(){var t=this.$route.path;return"/"==t[t.length-1]?t.substring(1,t.length-1).split("/"):t.substring(1).split("/")}}),methods:{logoff:function(){this.$store.dispatch("auth/setUser",null),this.$store.dispatch("auth/setToken",null),this.$store.dispatch("auth/setPoints",null),this.$router.push({path:"/login"}),this.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:"Você saiu com <strong>SUCESSO</strong>, volte logo!",type:"success"})}}},X={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"content"},[n("header",{staticClass:"header"},[n("div",{staticClass:"title"},[n("h1",[t._v(t._s(this.$route.name))]),t._v(" "),n("el-breadcrumb",{staticClass:"path",attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.pathFull,function(e){return n("el-breadcrumb-item",{key:e},[t._v(t._s(e))])}))],1),t._v(" "),n("div",{staticClass:"logout"},[n("button",{staticClass:"btn-logout",on:{click:function(e){t.logoff()}}},[t._v(">> SAIR")])])]),t._v(" "),n("section",{staticClass:"content-page"},[t._t("default")],2),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer"},[e("p",[this._v("© 2018 - TEST-ALLGOO (back-end). Todos os direitos reservados.")])])}]};var J={components:{"dv-navbar-mobile":B,"dv-navbar":Q,"dv-content":n("VU/8")(Y,X,!1,function(t){n("/Dkp")},"data-v-42c6267d",null).exports}},Z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dashboard"},[e("dv-navbar-mobile"),this._v(" "),e("dv-navbar"),this._v(" "),e("dv-content",[e("router-view")],1)],1)},staticRenderFns:[]};var tt=n("VU/8")(J,Z,!1,function(t){n("zhPt")},"data-v-ca9520fe",null).exports,et=function(t){return null!=t?F().get("/question/"+t):F().get("/question")},nt=function(t){return F().post("/question/register",t)},st=function(t){return F().delete("/question/delete/"+t)},at=function(){return F().get("/question/ranking/honesty")},rt=function(t){return F().post("/question/vote",t)},ot=function(t){return q().get("/user/"+t)},it={props:["question"],computed:N()({},Object(l.b)("auth",["user"])),data:function(){return{authorInfo:{},votar:!1,confirmTrue:!1,confirmFalse:!1,confirmDelete:!1,closed:!1,loading:""}},mounted:function(){var t=this;return b()(_.a.mark(function e(){var n,s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot(t.question.author_id);case 2:n=e.sent,t.authorInfo=n.data.users,(s=new Date(t.question.created_at)).setDate(s.getDate()+1),t.closed=s<new Date;case 7:case"end":return e.stop()}},e,t)}))()},methods:{formatDate:function(t){return(t=new Date(t)).getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},getPicture:function(){return""!=this.authorInfo.photo?this.authorInfo.photo:G.a},deleteQuestion:function(t){var e=this;return b()(_.a.mark(function n(){var s;return _.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e._openFullScreen(),n.next=4,st(t);case 4:n.sent,e.loading.close(),e.$message({dangerouslyUseHTMLString:!0,message:"Informação excluída com sucesso!",type:"success"}),e.$emit("delete",t),n.next=16;break;case 10:n.prev=10,n.t0=n.catch(0),s="Erro no nosso servidor, entre em contato com nosso administrador",void 0!=n.t0.response.status&&500!=n.t0.response.status&&(s=n.t0.response.data.errors[0].messages[0]),e.$alert(s,"Erro ao compartilhar",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",type:"error"}),e.loading.close();case 16:case"end":return n.stop()}},n,e,[[0,10]])}))()},vote:function(t){var e=this;return b()(_.a.mark(function n(){var s;return _.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e._openFullScreen(),s={question_id:e.question._id,response:"true"==t},n.next=5,rt(s);case 5:n.sent.data.correct?e.question.answers.correct.push(e.user.id):e.question.answers.wrong.push(e.user.id),e.$emit("refrashPoints"),e.loading.close(),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),e.$alert("Erro no nosso servidor, entre em contato com nosso administrador","Erro ao votar",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",type:"error"}),e.loading.close();case 15:case"end":return n.stop()}},n,e,[[0,11]])}))()},_openFullScreen:function(){this.loading=this.$loading({lock:!0,text:"Carregando",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}},ut={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"box-question",style:t.closed?"border-color: red":""},[n("div",[n("div",{staticClass:"box-infos-user"},[n("div",{staticClass:"picture"},[n("img",{attrs:{src:t.getPicture(),title:"foto do "+t.authorInfo.name}})]),t._v(" "),n("div",{staticClass:"infos"},[n("h2",[t._v(t._s(t.authorInfo.name))]),t._v(" "),n("p",[t._v(t._s(t.formatDate(t.question.created_at)))])])]),t._v(" "),n("p",{staticClass:"question"},[t._v(t._s(t.question.question))]),t._v(" "),t.closed||t.question.author_id==t.user.id||t.question.answers.correct.some(function(e){return e==t.user.id})||t.question.answers.wrong.some(function(e){return e==t.user.id})?t._e():n("div",[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.votar&&t.question.author_id!=t.user.id,expression:"!votar && question.author_id != user.id"}],attrs:{type:"info",icon:"el-icon-edit",size:"small",plain:"",round:""},on:{click:function(e){t.votar=!0}}},[t._v("VOTAR")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.votar,expression:"votar"}],staticClass:"box-select"},[n("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.confirmTrue,callback:function(e){t.confirmTrue=e},expression:"confirmTrue"}},[n("p",[t._v("Tem certeza que deseja votar como "),n("b",[t._v("verdade")]),t._v("?")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.confirmTrue=!1}}},[t._v("cancelar")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.vote("true")}}},[t._v("SIM")])],1),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"success",icon:"el-icon-success",size:"small",plain:""},slot:"reference"},[t._v("VERDADE")])],1),t._v(" "),n("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.confirmFalse,callback:function(e){t.confirmFalse=e},expression:"confirmFalse"}},[n("p",[t._v("Tem certeza que deseja votar como "),n("b",[t._v("mentira")]),t._v("?")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.confirmFalse=!1}}},[t._v("cancelar")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.vote("false")}}},[t._v("SIM")])],1),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-error",size:"small",plain:""},slot:"reference"},[t._v("MENTIRA")])],1),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(e){t.votar=!1}}},[t._v("Não Votar")])],1)],1),t._v(" "),t.question.answers.correct.some(function(e){return e==t.user.id})?n("p",{staticStyle:{color:"green"}},[t._v("=> Você já votou e ACERTOU!")]):t._e(),t._v(" "),t.question.answers.wrong.some(function(e){return e==t.user.id})?n("p",{staticStyle:{color:"red"}},[t._v("=>Você já votou e ERROU!")]):t.closed?n("p",[t._v("=> VOTAÇÃO FINALIZADA")]):t._e()]),t._v(" "),t.question.author_id==t.user.id?n("div",{staticClass:"btn-remove"},[n("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.confirmDelete,callback:function(e){t.confirmDelete=e},expression:"confirmDelete"}},[n("p",[t._v("Tem certeza que deseja excluir essa informação?")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.confirmDelete=!1}}},[t._v("cancelar")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.deleteQuestion(t.question._id)}}},[t._v("SIM")])],1),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1):t._e()])},staticRenderFns:[]};var ct={data:function(){return{visible:!1,question:null,response:"true",loading:null}},methods:{register:function(){var t=this;return b()(_.a.mark(function e(){var n,s,a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(!e.sent){e.next=24;break}return e.prev=4,t._openFullScreen(),n={question:t.question,response:"true"==t.response},e.next=9,nt(n);case 9:s=e.sent,t.loading.close(),t.$message({dangerouslyUseHTMLString:!0,message:"Informação compartilhada com sucesso!",type:"success"}),t.visible=!1,t.response="true",t.$emit("success",s.data.question),t.question=null,e.next=24;break;case 18:e.prev=18,e.t0=e.catch(4),a="Erro no nosso servidor, entre em contato com nosso administrador",void 0!=e.t0.response.status&&500!=e.t0.response.status&&(a=e.t0.response.data.errors[0].messages[0]),t.$alert(a,"Erro ao compartilhar",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",type:"error"}),t.loading.close();case 24:case"end":return e.stop()}},e,t,[[4,18]])}))()},_openFullScreen:function(){this.loading=this.$loading({lock:!0,text:"Carregando",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}},lt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"box-btn-new-question"},[n("el-button",{staticClass:"btn-new-question",attrs:{type:"success",icon:"el-icon-circle-plus",round:""},on:{click:function(e){t.visible=!0}}},[t._v("Compartilhar Informação")])],1),t._v(" "),n("form",{on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[n("el-dialog",{attrs:{title:"Compartilhe uma informação",visible:t.visible,width:"80%"},on:{"update:visible":function(e){t.visible=e}}},[n("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.question,expression:"question"}],class:{input:!0,"is-danger":t.errors.has("question")&&null!=t.question,"is-success":!t.errors.has("question")&&null!=t.question},attrs:{name:"question",type:"text",placeholder:"Questão / Informação ..."},domProps:{value:t.question},on:{input:function(e){e.target.composing||(t.question=e.target.value)}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("question")&&null!=t.question,expression:"errors.has('question') && question != null"}]},[t._v(" "+t._s(t.errors.first("question"))+" ")]),t._v(" "),n("div",{staticClass:"box-radius"},[n("label",[t._v("Reposta:")]),t._v(" "),n("el-radio",{attrs:{label:"true",border:""},model:{value:t.response,callback:function(e){t.response=e},expression:"response"}},[t._v("Verdade")]),t._v(" "),n("el-radio",{attrs:{label:"false",border:""},model:{value:t.response,callback:function(e){t.response=e},expression:"response"}},[t._v("Mentira")])],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.visible=!1}}},[t._v("Cancelar")]),t._v(" "),n("el-button",{attrs:{"native-type":"submit",icon:"el-icon-edit",type:"primary"}},[t._v("PUBLICAR")])],1)])],1)])},staticRenderFns:[]};var dt={components:{"a-card-question":n("VU/8")(it,ut,!1,function(t){n("HRwW")},"data-v-74b46d8b",null).exports,"a-new-question":n("VU/8")(ct,lt,!1,function(t){n("/AmK")},"data-v-762088b8",null).exports},computed:N()({},Object(l.b)("auth",["user"])),data:function(){return{questions:[]}},mounted:function(){var t=this;return b()(_.a.mark(function e(){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,et(null);case 3:n=e.sent,t.questions=n.data.questions.reverse(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),void 0!=e.t0.response.status&&403==e.t0.response.status?(t.$store.dispatch("auth/setUser",null),t.$store.dispatch("auth/setToken",null),t.$store.dispatch("auth/setPoints",null),t.$router.push({path:"/login"})):t.$alert("Desculpe, servidor indisponível! Volte mais tarde ou entre em contato com nosso suporte","Erro interno",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",type:"error"});case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},methods:{addQuestionRenderize:function(t){this.questions=this.questions.reverse(),this.questions.push(t),this.questions.reverse()},delQuestionRenderize:function(t){this.questions=this.questions.filter(function(e){return e._id!=t})},refrashPoints:function(){var t=this;return b()(_.a.mark(function e(){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({user_id:t.user.id});case 2:n=e.sent,t.$store.dispatch("auth/setPoints",n.data.points);case 4:case"end":return e.stop()}},e,t)}))()}}},pt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"home"},[t._m(0),t._v(" "),n("div",{staticClass:"box-btn-new-question"},[n("a-new-question",{on:{success:t.addQuestionRenderize}})],1),t._v(" "),n("section",{staticClass:"timeline"},t._l(t.questions,function(e){return n("div",{key:e._id},[n("a-card-question",{attrs:{question:e},on:{delete:t.delQuestionRenderize,refrashPoints:t.refrashPoints}})],1)}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i",{staticClass:"el-icon-tickets"}),this._v(" Mural de Informações")])}]};var vt=n("VU/8")(dt,pt,!1,function(t){n("bG1M")},"data-v-53322a2b",null).exports,ht=n("//Fk"),mt=n.n(ht),ft={data:function(){return{users:[]}},mounted:function(){var t=this;return b()(_.a.mark(function e(){var n,s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at();case 3:n=e.sent,s=n.data.ranking.map(function(){var e=b()(_.a.mark(function e(n){var s;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot(n._id);case 2:return s=t.sent,t.abrupt("return",{name:s.data.users.name,count:n.count});case 4:case"end":return t.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()),mt.a.all(s).then(function(e){t.users=e,t.users.sort(function(t,e){return t.count+e.count})}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),void 0!=e.t0.response.status&&403==e.t0.response.status?(t.$store.dispatch("auth/setUser",null),t.$store.dispatch("auth/setToken",null),t.$store.dispatch("auth/setPoints",null),t.$router.push({path:"/login"})):t.$alert("Desculpe, servidor indisponível! Volte mais tarde ou entre em contato com nosso suporte","Erro interno",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",type:"error"});case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()}},_t={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"honesty"},[e("el-alert",{attrs:{title:"Só serão mostrados na listas, os usuários que possuirem pelo menos uma informação VERDADEIRA compartilhada!",type:"warning"}}),this._v(" "),e("br"),this._v(" "),e("el-table",{ref:"honestyRanking",staticStyle:{width:"100%"},attrs:{data:this.users}},[e("el-table-column",{attrs:{type:"index",width:"50"}}),this._v(" "),e("el-table-column",{attrs:{property:"name",label:"Nome do Usuário"}})],1)],1)},staticRenderFns:[]};var gt=n("VU/8")(ft,_t,!1,function(t){n("s2Pr")},"data-v-f31698a6",null).exports,bt={data:function(){return{users:[]}},mounted:function(){var t=this;return b()(_.a.mark(function e(){var n,s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U();case 3:n=e.sent,s=n.data.punctuations.map(function(){var e=b()(_.a.mark(function e(n){var s;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot(n.user_id);case 2:return s=t.sent,t.abrupt("return",{name:s.data.users.name,punctuation:parseFloat(n.points).toFixed(3)});case 4:case"end":return t.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()),mt.a.all(s).then(function(e){t.users=e,t.users.sort(function(t,e){return t.punctuation+e.punctuation})}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),void 0!=e.t0.response.status&&403==e.t0.response.status?(t.$store.dispatch("auth/setUser",null),t.$store.dispatch("auth/setToken",null),t.$store.dispatch("auth/setPoints",null),t.$router.push({path:"/login"})):t.$alert("Desculpe, servidor indisponível! Volte mais tarde ou entre em contato com nosso suporte","Erro interno",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",type:"error"});case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()}},xt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("el-table",{ref:"punctuationRanking",staticStyle:{width:"100%"},attrs:{data:this.users}},[e("el-table-column",{attrs:{type:"index",width:"50"}}),this._v(" "),e("el-table-column",{attrs:{property:"name",label:"Nome do Usuário"}}),this._v(" "),e("el-table-column",{attrs:{property:"punctuation",label:"Pontuação"}})],1)],1)},staticRenderFns:[]},kt=n("VU/8")(bt,xt,!1,null,null,null).exports,wt=function(){return F().get("/transaction")},yt={props:["id","author"],data:function(){return{visible:!1,question:{}}},methods:{getInfos:function(){var t=this;return b()(_.a.mark(function e(){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,et(t.id);case 3:n=e.sent,t.question=n.data.question,t.visible=!0,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$message({dangerouslyUseHTMLString:!0,message:"Essa questão foi excluída por seu autor!",type:"error"});case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()},open:function(){this.visible?this.visible:this.getInfos()},formatDate:function(t){return(t=new Date(t)).getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}}},qt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",[n("span",{on:{click:function(e){t.open()}}},[t._t("default")],2),t._v(" "),n("el-dialog",{attrs:{title:"Visualize as Informações",visible:t.visible,width:"80%"},on:{"update:visible":function(e){t.visible=e}}},[t.visible&&t.question!={}?n("div",{staticClass:"body"},[n("p",[n("b",[t._v("Informação compartilhada:")]),t._v(" "+t._s(t.question.question))]),t._v(" "),n("p",[n("b",[t._v("Autor:")]),t._v(" "+t._s(t.author))]),t._v(" "),n("p",[n("b",[t._v("Data de criação:")]),t._v(" "+t._s(t.formatDate(t.question.created_at)))]),t._v(" "),void 0!=t.question.answers?n("span",[n("p",[n("b",[t._v("Quantidade de votos corretos:")]),t._v(" "+t._s(t.question.answers.correct.length))]),t._v(" "),n("p",[n("b",[t._v("Quantidade de votos errados:")]),t._v(" "+t._s(t.question.answers.wrong.length))])]):t._e()]):t._e(),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{plain:""},on:{click:function(e){t.visible=!1}}},[t._v("Fechar")])],1)])],1)},staticRenderFns:[]};var $t={props:["transaction"],components:{"a-box-info-question":n("VU/8")(yt,qt,!1,function(t){n("5bUX")},"data-v-d7c14c78",null).exports},data:function(){return{author_name:""}},mounted:function(){var t=this;return b()(_.a.mark(function e(){var n,s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ot(t.transaction.author_id);case 3:n=e.sent,t.author_name=n.data.users.name,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),s="Erro no nosso servidor, entre em contato com nosso administrador",t.$alert(s,"Erro ao carregar as informações",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",type:"error"});case 11:case"end":return e.stop()}},e,t,[[0,7]])}))()},methods:{formatDate:function(t){return(t=new Date(t)).getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}}},Ct={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("span",{staticClass:"date"},[t._v(t._s(t.formatDate(t.transaction.created_at)))]),t._v(" "),n("div",{staticClass:"msg"},[t._v("\n        O usuário '"+t._s(t.author_name)+"'\n        "+t._s("add"==t.transaction.type?"GANHOU":"PERDEU")+": "),n("b",[t._v(t._s(t.transaction.points.toFixed(2)))]),t._v(" ponto(s)")]),t._v(" "),n("a-box-info-question",{attrs:{id:t.transaction.question_id,author:t.author_name}},[n("div",{staticClass:"link-question"},[t._v("Informação da questão que foi votada")])])],1)},staticRenderFns:[]};var Ft={components:{"a-card-transaction":n("VU/8")($t,Ct,!1,function(t){n("BaGR")},"data-v-f05703c2",null).exports},data:function(){return{transactions:[]}},mounted:function(){var t=this;return b()(_.a.mark(function e(){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt();case 2:n=e.sent,t.transactions=n.data.transactions.reverse();case 4:case"end":return e.stop()}},e,t)}))()}},Ut={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"transaction"},[this._m(0),this._v(" "),e("div",{staticClass:"transactions"},this._l(this.transactions,function(t){return e("div",{key:t._id},[e("a-card-transaction",{attrs:{transaction:t}})],1)}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i",{staticClass:"el-icon-tickets"}),this._v(" Logs")])}]};var Tt=[{path:"/dashboard",component:tt,children:[{path:"/dashboard/transaction",name:"Transações",component:n("VU/8")(Ft,Ut,!1,function(t){n("JpfY")},"data-v-3920e6da",null).exports,meta:{auth:!0,func:[2]}},{path:"/dashboard/home",name:"Mural",component:vt,meta:{auth:!0,func:[1]}},{path:"/dashboard/ranking/honesty",name:"Honestidade",component:gt,meta:{auth:!0,func:[1]}},{path:"/dashboard/ranking/punctuation",name:"Pontuação",component:kt,meta:{auth:!0,func:[1]}}]}],Et=[{path:"",redirect:"/dashboard/home"},{path:"*",redirect:"/login"},{path:"/login",name:"Login",component:D,meta:{general:!0}}].concat(m()(Tt));r.default.use(c.a);var St=new c.a({mode:"history",base:"/portal/",routes:Et});St.beforeEach(function(t,e,n){if(t.matched.some(function(t){return t.meta.general})&&!0===v.state.auth.isUserLoggedIn)return 1==v.state.auth.user.func?n({path:"/dashboard/home"}):n({path:"/dashboard/transaction"});t.matched.some(function(t){return t.meta.auth})&&t.matched.some(function(t){return t.meta.func})&&(!1===v.state.auth.isUserLoggedIn||t.matched.some(function(t){return void 0!=t.meta.func&&!t.meta.func.some(function(t){return t==v.state.auth.user.func})}))?n({path:"/login",query:{redirect:t.fullPath}}):n()});var Rt=St,Lt=n("LVWl"),Ot=n.n(Lt),Pt=n("Lgyv"),Dt=n.n(Pt),It=n("sUu7"),Vt=n("RAMx"),Mt=n.n(Vt);r.default.config.productionTip=!1,r.default.use(a.a,{locale:Ot.a}),r.default.use(Dt.a),It.a.localize("pt_BR",Mt.a),r.default.use(It.b,{locale:"pt_BR"}),Object(u.sync)(v,Rt),new r.default({el:"#app",router:Rt,store:v,template:"<App/>",components:{App:i}})},TFOp:function(t,e){},YWvW:function(t,e){},bG1M:function(t,e){},gNcp:function(t,e,n){var s={"./auth.js":"D+VX","./index.js":"2mV7"};function a(t){return n(r(t))}function r(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(s)},a.resolve=r,t.exports=a,a.id="gNcp"},s2Pr:function(t,e){},tqqN:function(t,e){},tvR6:function(t,e){},zhPt:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.3eec12c4ede3609cc003.js.map